<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin â€“ Upload Video</title>
  <style>
    body { background:#0b1020; color:white; font-family:sans-serif; text-align:center; }
    input, button { margin:10px; padding:8px; border-radius:6px; }
    #uploadSection { display:none; }
  </style>
</head>
<body>
  <h1>ğŸ” Admin Login</h1>

  <!-- Password -->
  <input type="password" id="adminPass" placeholder="Enter Admin Password" />
  <button onclick="checkPass()">Login</button>

  <!-- Upload Section -->
  <div id="uploadSection">
    <h2>ğŸ“¤ Upload Video</h2>

    <!-- URL Upload -->
    <input type="text" id="videoUrl" placeholder="Paste YouTube/Facebook/Instagram URL" />
    <button id="addUrlBtn">Add URL</button>
    <br><br>

    <!-- File Upload -->
    <input type="file" id="videoFile" accept="video/*" />
    <button id="uploadFileBtn">Upload File</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
    import { getStorage, ref as sRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

    // âœ… Firebase Config (your config)
    const firebaseConfig = {
  apiKey: "AIzaSyAV8KfV0WQKHsB2o6x_HjMbeujeBIPA4Hw",
  authDomain: "full-video-b21b2.firebaseapp.com",
  databaseURL: "https://full-video-b21b2-default-rtdb.firebaseio.com",
  projectId: "full-video-b21b2",
  storageBucket: "full-video-b21b2.appspot.com",   // âœ… à¤¯à¤¹ à¤¸à¤¹à¥€ à¤¹à¥ˆ
  messagingSenderId: "530905824771",
  appId: "1:530905824771:web:eb7c6242bbd825f0a71836",
  measurementId: "G-C6CE0CLHP8"
};


    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const storage = getStorage(app);

    // ğŸ”‘ Password
    window.checkPass = function(){
      const pass = document.getElementById("adminPass").value;
      if(pass === "Prashant"){
        document.getElementById("uploadSection").style.display = "block";
        document.getElementById("adminPass").style.display = "none";
        event.target.style.display = "none";
        document.querySelector("h1").innerText = "âœ… Welcome Admin";
      } else {
        alert("âŒ Wrong Password!");
      }
    }

    // Detect Platform
    function detectPlatform(url){
      if(url.includes("youtube.com") || url.includes("youtu.be")) return "youtube";
      if(url.includes("facebook.com")) return "facebook";
      if(url.includes("instagram.com")) return "instagram";
      return "other";
    }

    // Add URL Video
    document.getElementById("addUrlBtn").onclick = () => {
      const url = document.getElementById("videoUrl").value;
      if (!url) return alert("Enter a valid URL!");

      const type = detectPlatform(url);
      const newRef = push(ref(db, "videos"));
      set(newRef, { type:"url", platform:type, link:url });
      alert("âœ… Video URL added!");
    };

    // Upload File
    document.getElementById("uploadFileBtn").onclick = () => {
      const file = document.getElementById("videoFile").files[0];
      if (!file) return alert("Choose a file!");

      const storageRef = sRef(storage, "videos/" + file.name);
      uploadBytes(storageRef, file).then(snapshot => {
        getDownloadURL(snapshot.ref).then(url => {
          const newRef = push(ref(db, "videos"));
          set(newRef, { type:"file", platform:"file", link:url });
          alert("âœ… Video uploaded!");
        });
      });
    };
  </script>
</body>
</html>
